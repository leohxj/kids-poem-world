---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const poems = await getCollection('poems');
  return poems.map(poem => ({
    params: { slug: poem.slug },
    props: { poem },
  }));
}

const { poem } = Astro.props;
const { Content } = await poem.render();
---

<BaseLayout title={poem.data.title}>
  <div class="max-w-prose mx-auto">
    <article class="prose prose-slate lg:prose-lg mx-auto mb-8">
      <h1>{poem.data.title}</h1>
      <p class="text-gray-600">
        {poem.data.dynasty} · {poem.data.author}
      </p>
      <Content />
    </article>

    <div class="text-center">
      <a
        href="/"
        class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 hover:text-gray-900 transition-colors duration-200 ease-in-out"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4 mr-2"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
            clip-rule="evenodd"
          />
        </svg>
        返回首页
      </a>
    </div>
  </div>
</BaseLayout>
